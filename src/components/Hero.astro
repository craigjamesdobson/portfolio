---
import type { ContactLink } from "../data/cv";

type Props = {
  name: string;
  title: string;
  location: string;
  contactLinks: readonly ContactLink[];
};

const { name, title, location, contactLinks } = Astro.props as Props;
const profileLinks = contactLinks.filter((link) => {
  const key = link.label.toLowerCase();
  return key === "email" || key === "github";
});
---

<section id="about" class="mb-10 mt-16 reveal" style="--delay: 60ms;">
  <h1 class="mb-4 font-semibold text-xl">{name}</h1>
  <div class="[&_p]:mb-6 text-[0.9rem] leading-7">
    <p>
      <span class="text-accent">{title} </span>
      <span class="opacity-60">based in {location}.</span>
    </p>
    <p class="text-muted">
      Senior web developer with over <span class="text-accent font-bold">ten years of experience</span> building and
      maintaining production ecommerce systems in agency and product contexts.
      Frontend-focused with a strong full-stack foundation across a .NET and SQL Server stack, including modernising
      legacy platforms, leading Vue adoption, and delivering Shopify solutions from early-stage startups through to
      Shopify Plus clients.
    </p>
  </div>

  <div class="flex flex-wrap gap-3 text-[0.82rem] [&_a]:transition-all [&_a]:duration-200">
    {
      profileLinks.map((link) => {
        const isEmail = link.label.toLowerCase() === "email";
        return (
          <a
            class="inline-flex items-center gap-2 border border-border/70 px-3 py-1.5 opacity-70 hover:opacity-100"
            href={link.href}
            target={link.href.startsWith("http") ? "_blank" : undefined}
            rel={link.href.startsWith("http") ? "noreferrer noopener" : undefined}
          >
            {isEmail ? (
              <svg class="h-5 w-5 text-accent" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <rect x="3" y="5" width="18" height="14" rx="2"></rect>
                <path d="m3 7 9 6 9-6"></path>
              </svg>
            ) : (
              <svg class="h-5 w-5 text-accent" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M9 19c-5 1.5-5-2.5-7-3"></path>
                <path d="M15 22v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7a5.44 5.44 0 0 0-1.5-3.75 5.07 5.07 0 0 0-.09-3.77s-1.18-.35-3.91 1.48a13.38 13.38 0 0 0-7 0C4.32.65 3.14 1 3.14 1A5.07 5.07 0 0 0 3 4.77 5.44 5.44 0 0 0 1.5 8.52c0 5.42 3.3 6.61 6.44 7a3.37 3.37 0 0 0-.94 2.61V22"></path>
              </svg>
            )}
            <span>{link.label}</span>
          </a>
        );
      })
    }
    <a class="inline-flex items-center gap-2 border border-accent/50 px-3 py-1.5 text-accent opacity-90 hover:opacity-100" href="/cv/craig-dobson-cv.pdf" download>
      <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
        <path d="M7 10l5 5 5-5"></path>
        <path d="M12 15V3"></path>
      </svg>
      <span>Download CV</span>
    </a>
  </div>
</section>
